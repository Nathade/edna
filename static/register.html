<!doctype html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang=""> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8" lang=""> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9" lang=""> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang=""> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title></title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="apple-touch-icon" href="apple-touch-icon.png">

        <!--<link rel="stylesheet" href="css/bootstrap.min.css">
        <link rel="stylesheet" href="css/bootstrap-theme.min.css">-->


        <link rel="stylesheet" href="css/style.css">
        <link rel="stylesheet" href="css/main.css">

        <style>
          .edna-form-group{
            background-color:#fff;
          }
        </style>


        <script src="js/vendor/modernizr-2.8.3-respond-1.4.2.min.js"></script>
        <script src='https://www.google.com/recaptcha/api.js'></script>
        <script>
        function init(){
          console.log("init");
            var myform = document.getElementById("regsform");
            myform.addEventListener("submit", function(e){
            console.log("submit");
            var admin_name = document.getElementById("admin_name").value;
            var admin_phone = document.getElementById("admin_phone").value;
            var domain_extension = document.getElementById("school_id").value;
            var password = document.getElementById("password").value;
            var admin_email = document.getElementById("admin_email").value;
            var errors = '';
            var errorDiv = document.getElementById("errorDiv");
            if(admin_email == '' || admin_phone == '' || domain_extension == '' || password == ''){
              errors += "<p class='label-warning' >Please fill in all required fields</p>";
            }
            if(errors != ''){
              errorDiv.innerHTML = errors;
              e.preventDefault();
            }else {
              errorDiv.innerHTML='';
            }
          });
        }

        function textChange(){
        var txt = document.getElementById("school_id").value;
        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function(){
          document.getElementById("response").innerHTML = xhttp.responseText;
          console.log(xhttp.responseText);
        };
        xhttp.open("GET", "/val/reg?id="+txt);
        xhttp.send();
        }

        function textChangeEmail(){
        var txt = document.getElementById("admin_email").value;
        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function(){
          document.getElementById("response2").innerHTML = xhttp.responseText;
          console.log(xhttp.responseText);
        };
        xhttp.open("GET", "/val/email?id="+txt);
        xhttp.send();
        }

        </script>
    </head>
    <body style="padding-top:0" onload="init()">
        <!--[if lt IE 8]>
            <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->


        <section style="text-align:center;">

            <section class="register-form-side register-form" style="text-align:left;;">
              <div  class="pad">
                <br/>
                <div class="register-heading">
                  <a href="/"><img  src="img/edna-black.png" class="img-responsive" /></a>
                </div>

                <form method="post" id="regsform">
                  <h3 style="margin-top:0;">Edna makes it possible to enjoy the interesting parts of running a school</h3>
                  <p>Create an edna account for your school. Accounts get deleted after specific periods of inactivity.</p>
                  <br/>
                  <div id="errorDiv">

                  </div>
                  <div class="form-group edna-form-group ">
                    <label for="school_name">School Name</label>
                    <input type="text" class="form-control" id="school_name"  name="school_name"  placeholder="Edna International School"/>
                  </div>
                  <div class="form-group edna-form-group ">
                    <label >School Id</label><br/>
                    <input type="text" class="form-control" oninput="textChange()" id="school_id"  name="school_id" placeholder="edna-international" aria-describedby="domain_extension" style="width:59%; display:inline-block; text-align:right;"/>
                    <span class="input-group-addon" id="domain_extension" style="width:39%; display:inline-block; text-align:left; background-color:transparent; border:none; padding-left:0;">.edna.ng</span>
                  </div>
                  <div id="response">

                  </div>

                  <div class="form-group edna-form-group ">
                    <label for="admin_name">Your Name</label>
                    <input type="text" class="form-control" id="admin_name"  name="admin_name" placeholder="John Etim"/>
                  </div>

                  <div class="form-group edna-form-group " style="width:49%; display:inline-block">
                    <label for="admin_phone">Phone no</label>
                    <input type="text" class="form-control" id="admin_phone"  name="admin_phone" placeholder="Will serve as your username"/>
                  </div>

                  <div class="form-group edna-form-group " style="width:49%; display:inline-block">
                    <label for="phone">Password</label>
                    <input type="text" class="form-control" id="password" name="password" placeholder="Minimum 4 characters"/>
                  </div>


                  <div class="form-group edna-form-group ">
                    <label for="admin_email">Email</label>
                    <input type="text" class="form-control" id="admin_email" oninput="textChangeEmail()" name="admin_email" placeholder="We will send occassional information "/>
                  </div>
                  <div id="response2">

                  </div>

                  <div class="g-recaptcha" data-sitekey="6Lf5yBsTAAAAAH-uoGcV-dcXx9SqAPzCx925Q2Ii"></div>

                  <br/>
                  <button type="submit" class="btn register-btn" style="padding: 8px 30px;">Submit</button>
                  </form>
              </div>
              <div class="logo-footer" style="width:auto; position:relative;">
                <div class="logo-wrapper">
                  <div class="img">
                    <a href="/"><img  src="img/edna-black.png" /></a>
                  </div>
                  <p class="footer-p">Manage  students, data and financials for your school with ease</p>
                </div>
              </div>
            </section

        </section>

        <script>window.jQuery || document.write('<script src="js/vendor/jquery-1.11.2.min.js"><\/script>')</script>

        <script src="js/vendor/bootstrap.min.js"></script>
        <script src="js/main.js"></script>
    </body>
</html>
